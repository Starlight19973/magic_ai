{% extends "base.html" %}

{% block content %}
<div class="my-courses-page">
  <div class="my-courses-header">
    <h1 class="my-courses-header__title">
      <svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor">
        <path d="M16 3l4 8 9 1-6.5 6.3 1.5 9-8-4.2-8 4.2 1.5-9L3 12l9-1 4-8z"/>
      </svg>
      Мои курсы
    </h1>
    <p class="my-courses-header__subtitle">Ваша библиотека магических знаний</p>
  </div>

  {% if courses %}
  <div class="my-courses-grid">
    {% for item in courses %}
    <div class="my-course-card">
      <div class="my-course-card__header">
        <img src="{{ item.course.cover }}" alt="{{ item.course.title }}" class="my-course-card__cover">
        <div class="my-course-card__overlay">
          <div class="my-course-card__badges">
            {% for badge in item.course.badges %}
            <span class="badge badge--small">{{ badge }}</span>
            {% endfor %}
          </div>
        </div>
      </div>

      <div class="my-course-card__body">
        <h3 class="my-course-card__title">{{ item.course.title }}</h3>
        <p class="my-course-card__tagline">{{ item.course.tagline }}</p>

        <div class="my-course-card__meta">
          <div class="meta-item">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M8 2a6 6 0 100 12A6 6 0 008 2zM7 4h2v4H7V4zm0 5h2v2H7V9z"/>
            </svg>
            <span>{{ item.duration_weeks }} недель</span>
          </div>
          
          <div class="meta-item">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M2 3h12v2H2V3zm0 4h12v2H2V7zm0 4h8v2H2v-2z"/>
            </svg>
            <span>Куплен {{ item.purchased_at.strftime('%d.%m.%Y') if item.purchased_at else 'Недавно' }}</span>
          </div>
        </div>

        <div class="my-course-card__progress">
          <div class="progress-bar">
            <div class="progress-bar__fill" style="width: 0%"></div>
          </div>
          <span class="progress-text">Начать обучение</span>
        </div>

        <a href="{{ url_for('courses.my_course', slug=item.course.slug) }}" class="btn btn--primary btn--full btn--glow">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M6 4l8 6-8 6V4z" fill="currentColor"/>
          </svg>
          Перейти к курсу
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty-state">
    <div class="empty-state__icon">
      <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
        <path d="M32 8l8 16 18 2-13 13 3 18-16-8-16 8 3-18-13-13 18-2 8-16z" stroke="currentColor" stroke-width="2"/>
      </svg>
    </div>
    <h2 class="empty-state__title">Ваша библиотека пуста</h2>
    <p class="empty-state__text">Пока вы не приобрели ни одного курса. Начните своё путешествие в мир AI!</p>
    <a href="{{ url_for('public.index') }}#catalog" class="btn btn--primary btn--large btn--glow">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path d="M10 3v14M3 10h14" stroke="currentColor" stroke-width="2"/>
      </svg>
      Выбрать курс
    </a>
  </div>
  {% endif %}

  <!-- Рекомендации -->
  {% if courses %}
  <div class="my-courses-footer">
    <h2 class="my-courses-footer__title">Продолжайте развиваться</h2>
    <p class="my-courses-footer__text">Откройте для себя новые курсы и расширяйте свои навыки</p>
    <a href="{{ url_for('public.index') }}#catalog" class="btn btn--ghost btn--large">
      Смотреть каталог
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}

