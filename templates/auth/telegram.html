{% extends "base.html" %}

{% block content %}
<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1>–í—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram</h1>
      <p>–ë—ã—Å—Ç—Ä–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é Telegram</p>
    </div>

    <div class="telegram-widget-container">
      {% if bot_username %}
        <!-- Telegram Login Widget -->
        <div class="telegram-widget-wrapper">
          <p class="telegram-info">–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram –æ–¥–Ω–∏–º –Ω–∞–∂–∞—Ç–∏–µ–º:</p>
          <script async src="https://telegram.org/js/telegram-widget.js?22"
                  data-telegram-login="{{ bot_username }}"
                  data-size="large"
                  data-auth-url="{{ url_for('auth.telegram_callback', _external=True) }}"
                  data-request-access="write">
          </script>
        </div>
      {% else %}
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ -->
        <p class="telegram-info">
          –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram OAuth –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
        </p>
        <ol class="telegram-steps">
          <li>–°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ <a href="https://t.me/BotFather" target="_blank">@BotFather</a></li>
          <li>–ü–æ–ª—É—á–∏—Ç—å Bot Token –∏ Bot Username</li>
          <li>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω –≤ /setdomain</li>
          <li>–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env:
            <pre style="background: rgba(0,0,0,0.2); padding: 10px; border-radius: 8px; margin-top: 10px;">
TELEGRAM_OAUTH_BOT_TOKEN=–≤–∞—à_API_KEY
TELEGRAM_OAUTH_BOT_USERNAME=–∏–º—è_–±–æ—Ç–∞_–±–µ–∑_@</pre>
          </li>
        </ol>

        <div class="telegram-placeholder">
          <p>ü§ñ Telegram OAuth –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</p>
          <p class="text-muted">–î–æ–±–∞–≤—å—Ç–µ TELEGRAM_OAUTH_BOT_TOKEN –∏ TELEGRAM_OAUTH_BOT_USERNAME –≤ .env</p>
        </div>
      {% endif %}
    </div>

    <div class="auth-footer" style="margin-top: 32px;">
      <p>
        <a href="{{ url_for('auth.login') }}">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—ã—á–Ω–æ–º—É –≤—Ö–æ–¥—É</a>
      </p>
    </div>
  </div>
</div>
{% endblock %}

