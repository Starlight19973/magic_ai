{% extends "base.html" %}

{% block content %}
<div class="quest-container quest-container--results">
  <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä (–∑–∞–≤–µ—Ä—à—ë–Ω) -->
  <div class="quest-progress quest-progress--complete">
    <div class="quest-progress__bar" style="width: 100%"></div>
    <span class="quest-progress__text">‚ú® –ò—Å–ø—ã—Ç–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ!</span>
  </div>

  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
  <div class="quest-results">
    <div class="quest-results__header">
      <div class="quest-results__icon">
        üéì
      </div>
      <h1 class="quest-results__title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</h1>
      <p class="quest-results__message">{{ recommendation.message if recommendation.message else '–ú—ã –ø–æ–¥–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –∏–¥–µ–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã!' }}</p>
    </div>

    <!-- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã -->
    <div class="quest-recommendations">
      <h2 class="quest-recommendations__title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø—É—Ç—å –æ–±—É—á–µ–Ω–∏—è
      </h2>

      {% if recommendation.recommendations %}
      <div class="quest-courses">
        {% for course in recommendation.recommendations %}
        <div class="quest-course">
          <div class="quest-course__badge">
            {% if course.level == 'beginner' %}
              üå± –ù–æ–≤–∏—á–æ–∫
            {% elif course.level == 'junior' %}
              üî• –ë–∞–∑–æ–≤—ã–π
            {% elif course.level == 'middle' %}
              ‚ö° –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π
            {% else %}
              üíé –≠–∫—Å–ø–µ—Ä—Ç
            {% endif %}
          </div>
          <h3 class="quest-course__title">{{ course.title }}</h3>
          <p class="quest-course__reason">{{ course.reason }}</p>
          
          {% if course.tools %}
          <div class="quest-course__tools">
            <span class="quest-course__tools-label">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:</span>
            {% for tool in course.tools %}
              <span class="quest-course__tool-badge">{{ tool }}</span>
            {% endfor %}
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <!-- CTA –±–ª–æ–∫ (–Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ) -->
    <div class="quest-cta">
      <div class="quest-cta__content">
        {% if not session.get('user_id') %}
          <h3 class="quest-cta__title">üéì –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –∏–∑—É—á–∞—Ç—å –º–∞–≥–∏—é –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π!</h3>
          <p class="quest-cta__description">
            –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å:<br>
            ‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–≤–æ–º—É —É—Ä–æ–∫—É –±–µ—Å–ø–ª–∞—Ç–Ω–æ<br>
            ‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è<br>
            ‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫—É—Ä—Å–∞<br>
            ‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫—É –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–≤ –≤ –∑–∞–∫—Ä—ã—Ç–æ–º —á–∞—Ç–µ
          </p>
          
          <div class="quest-cta__actions">
            <a href="{{ url_for('auth.register') }}" class="btn btn--primary btn--large">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10 5v10M5 10h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –Ω–∞—á–∞—Ç—å
            </a>
            <a href="{{ url_for('auth.login') }}" class="btn btn--ghost btn--large">
              –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç
            </a>
          </div>

          <p class="quest-cta__note">
            üí° –•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ? 
            <a href="{{ url_for('public.index') }}#catalog" class="quest-cta__link">
              –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å–æ–≤
            </a> 
            –∏–ª–∏ 
            <a href="{{ url_for('quest.quest_restart') }}" class="quest-cta__link">
              –ø—Ä–æ–π–¥–∏—Ç–µ –∫–≤–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
            </a>
          </p>
        {% else %}
          <h3 class="quest-cta__title">–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ?</h3>
          <p class="quest-cta__description">
            –í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å –∏–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –≤—ã—à–µ –∏ –Ω–∞—á–Ω–∏—Ç–µ —Å–≤–æ—ë –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –º–∏—Ä AI!
          </p>
          
          <div class="quest-cta__actions">
            <a href="{{ url_for('public.index') }}#catalog" class="btn btn--primary btn--large">
              –ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É –∫—É—Ä—Å–æ–≤
            </a>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–∫—Ä—ã—Ç—ã–π –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è) -->
    {% if recommendation.get('profile') %}
    <div class="quest-profile" style="display: none;">
      <h3>–í–∞—à –º–∞–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å:</h3>
      <ul>
        <li>–£—Ä–æ–≤–µ–Ω—å: {{ recommendation.profile.get('level', '–ù–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω') }}</li>
        <li>–ò–Ω—Ç–µ—Ä–µ—Å—ã: {{ recommendation.profile.get('interest', '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã') }}</li>
        <li>–û–ø—ã—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: {{ recommendation.profile.get('coding', '–ù–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω') }}</li>
        <li>–í—Ä–µ–º—è –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ: {{ recommendation.profile.get('time', '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ') }}</li>
        <li>–¶–µ–ª—å: {{ recommendation.profile.get('goal', '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞') }}</li>
      </ul>
    </div>
    {% endif %}
  </div>

  <!-- –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (—É—Å–ø–µ—Ö) -->
  <div class="quest-sparkles quest-sparkles--success" aria-hidden="true">
    <div class="sparkle sparkle--gold"></div>
    <div class="sparkle sparkle--gold"></div>
    <div class="sparkle sparkle--gold"></div>
    <div class="sparkle sparkle--gold"></div>
    <div class="sparkle sparkle--gold"></div>
    <div class="sparkle sparkle--purple"></div>
    <div class="sparkle sparkle--purple"></div>
    <div class="sparkle sparkle--purple"></div>
  </div>
</div>
{% endblock %}

