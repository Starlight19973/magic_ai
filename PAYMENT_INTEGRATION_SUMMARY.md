# üí∞ –†–µ–∑—é–º–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π –ÆKassa

**–î–∞—Ç–∞:** 2025-11-20
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–æ–∂–∏–¥–∞–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –ÆKassa)

---

## üì¶ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. Backend

#### –ú–æ–¥–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: `Payment`
**–§–∞–π–ª:** `app/models/payment.py`

–ü–æ–ª—è:
- `user_id` ‚Äî —Å–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `course_id` ‚Äî ID –∫—É—Ä—Å–∞
- `yookassa_payment_id` ‚Äî ID –ø–ª–∞—Ç–µ–∂–∞ –≤ –ÆKassa
- `amount` ‚Äî —Å—É–º–º–∞ –≤ —Ä—É–±–ª—è—Ö
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å (pending, succeeded, canceled)
- `confirmation_url` ‚Äî URL –¥–ª—è –æ–ø–ª–∞—Ç—ã
- `created_at`, `updated_at`, `paid_at` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

#### –°–µ—Ä–≤–∏—Å: `YooKassaService`
**–§–∞–π–ª:** `app/services/yookassa.py`

–ú–µ—Ç–æ–¥—ã:
- `create_payment()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ API –ÆKassa
- `get_payment_info()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞—Ç–µ–∂–µ
- `process_webhook()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –ÆKassa
- `verify_webhook_signature()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ (TODO)

#### –†–æ—É—Ç—ã: `payments_bp`
**–§–∞–π–ª:** `app/routes/payments.py`

- `POST /payments/create` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `GET /payment/success` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- `GET /payment/cancel` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–º–µ–Ω—ã –æ–ø–ª–∞—Ç—ã
- `POST /payments/webhook` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook –æ—Ç –ÆKassa

#### Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
**–§–∞–π–ª:** `app/services/email.py`

- `send_purchase_email()` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –æ –ø–æ–∫—É–ø–∫–µ –∫—É—Ä—Å–∞
- –ö—Ä–∞—Å–∏–≤—ã–π HTML —à–∞–±–ª–æ–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∫—É—Ä—Å
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—á–∞–ª—É –æ–±—É—á–µ–Ω–∏—è

### 2. Frontend

#### JavaScript –¥–ª—è –æ–ø–ª–∞—Ç—ã
**–§–∞–π–ª:** `static/js/payments.js`

–§—É–Ω–∫—Ü–∏–∏:
- `showPurchaseModal()` ‚Äî –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏
- `confirmPurchase()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ API
- `buyCourse()` ‚Äî —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –±–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- `showLoadingOverlay()` ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

#### HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã
**–§–∞–π–ª—ã:**
- `templates/payments/success.html` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- `templates/payments/cancel.html` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–º–µ–Ω—ã

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `app/config.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ÆKassa
- `app/__init__.py` ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω blueprint `payments_bp`
- `app/models/__init__.py` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏ `Payment`
- `requirements.txt` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `yookassa==3.8.0`
- `.env.example` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ÆKassa

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `YOOKASSA_SETUP.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- `PAYMENT_INTEGRATION_SUMMARY.md` ‚Äî —ç—Ç–æ —Ä–µ–∑—é–º–µ

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –ÆKassa

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –≤–∞—à–µ–π –∑–∞—è–≤–∫–∏:

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: https://yookassa.ru/my
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Shop ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456`)
   - **Secret Key** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `live_abc123...`)

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```env
# –ÆKassa
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id_–æ—Ç_—é–∫–∞—Å—Å–∞
YOOKASSA_SECRET_KEY=–≤–∞—à_secret_key_–æ—Ç_—é–∫–∞—Å—Å–∞
YOOKASSA_RETURN_URL=https://neuro-magic.ru/payment/success
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
pip install yookassa==3.8.0

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker-compose up -d --build
```

### –®–∞–≥ 4: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `payments`:

```bash
# Docker
docker-compose down -v
docker-compose up -d --build

# –õ–æ–∫–∞–ª—å–Ω–æ
rm neuromagic.db  # –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é
quart --app main:app run
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Webhook –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://yookassa.ru/my/merchant/integration/http-notifications
2. –í–∫–ª—é—á–∏—Ç–µ HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. URL: `https://neuro-magic.ru/payments/webhook`
4. –°–æ–±—ã—Ç–∏—è:
   - ‚úÖ payment.succeeded
   - ‚úÖ payment.waiting_for_capture
   - ‚úÖ payment.canceled

‚ö†Ô∏è **–í–ê–ñ–ù–û:** Webhook —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ HTTPS!

### –®–∞–≥ 6: –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å –∫—É—Ä—Å" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫—É—Ä—Å–æ–≤

–ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫—É—Ä—Å–∞:

```html
<!-- –í —à–∞–±–ª–æ–Ω–µ –∫—É—Ä—Å–∞ -->
<script src="{{ url_for('static', filename='js/payments.js') }}"></script>

<button onclick="showPurchaseModal('{{ course.id }}', '{{ course.title }}', 1990)">
    –ö—É–ø–∏—Ç—å –∫—É—Ä—Å –∑–∞ 1990 ‚ÇΩ
</button>
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ –æ—Ç –ÆKassa:
```env
YOOKASSA_SHOP_ID=123456  # —Ç–µ—Å—Ç–æ–≤—ã–π
YOOKASSA_SECRET_KEY=test_abc123...  # –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å test_
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã

- **–£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞:** `5555 5555 5555 4444`
- **–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –±–∞–Ω–∫–æ–º:** `5555 5555 5555 5599`
- **CVV:** –ª—é–±–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 123)
- **–°—Ä–æ–∫:** –ª—é–±–∞—è –¥–∞—Ç–∞ –≤ –±—É–¥—É—â–µ–º

### Workflow —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫—É—Ä—Å–∞
2. –ù–∞–∂–º–∏—Ç–µ "–ö—É–ø–∏—Ç—å –∫—É—Ä—Å"
3. –í–≤–µ–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/payment/success`
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f app`
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î: `SELECT * FROM payments;`
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –≤ –ø–æ—á—Ç–µ

---

## üìã Checklist –ø–µ—Ä–µ–¥ production

- [ ] –ü–æ–ª—É—á–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –æ—Ç –ÆKassa (–Ω–µ test_*)
- [ ] –ö–ª—é—á–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –¢–∞–±–ª–∏—Ü–∞ `payments` —Å–æ–∑–¥–∞–Ω–∞ –≤ PostgreSQL
- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–Ω—ã–π (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å: `curl https://neuro-magic.ru`)
- [ ] SMTP –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ (–Ω–µ—Ç –æ—à–∏–±–æ–∫)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å –∫—É—Ä—Å" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## üí° –°—Ü–µ–Ω–∞—Ä–∏–π –æ–ø–ª–∞—Ç—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫—É—Ä—Å–∞
   ‚Üì
2. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å –∫—É—Ä—Å –∑–∞ 1990 ‚ÇΩ"
   ‚Üì
3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
   ‚Üì
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ"
   ‚Üì
5. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /payments/create
   ‚Üì
6. Backend —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ –≤ –ÆKassa —á–µ—Ä–µ–∑ API
   ‚Üì
7. Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç Payment –≤ –ë–î (status=pending)
   ‚Üì
8. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç confirmation_url
   ‚Üì
9. Frontend —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ confirmation_url (—Ñ–æ—Ä–º–∞ –ÆKassa)
   ‚Üì
10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ÆKassa
    ‚Üì
11. –ÆKassa –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
    ‚Üì
12. –ÆKassa —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ /payment/success
    ‚Üì
13. –ÆKassa –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ /payments/webhook
    ‚Üì
14. Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç Payment (status=succeeded, paid_at=now)
    ‚Üì
15. Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    ‚Üì
16. –ÆKassa –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫ –≤ –Ω–∞–ª–æ–≥–æ–≤—É—é (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚Üì
17. –ÆKassa –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫ –Ω–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚Üì
18. TODO: Backend –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫—É—Ä—Å—É (UserCourse)
```

---

## üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–π –æ—Ç –ÆKassa:

1. **–î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ `.env`** –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—É—é –æ–ø–ª–∞—Ç—É** —Å —Ä–µ–∞–ª—å–Ω–æ–π/—Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ webhook —Ä–∞–±–æ—Ç–∞–µ—Ç** (—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏)
4. **–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –ø–æ–∫—É–ø–∫–∏** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫—É—Ä—Å–æ–≤

### –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ:

- [ ] –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏" –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏—é –¥–æ—Å—Ç—É–ø–∞ –∫ –∫—É—Ä—Å—É –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤/—Å–∫–∏–¥–æ–∫
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–ª–∞—Ç–µ–∂–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç—ã/–æ—Ç–º–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–µ–π

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** `docker-compose logs -f app`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î:** `docker-compose exec postgres psql -U neuromagic_user -d neuromagic`
3. **–ß–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:** `YOOKASSA_SETUP.md`
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ÆKassa:** 8 800 234-24-80

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
app/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ payment.py              # –ú–æ–¥–µ–ª—å Payment
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ yookassa.py             # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
‚îÇ   ‚îî‚îÄ‚îÄ email.py                # –û—Ç–ø—Ä–∞–≤–∫–∞ email (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ payments.py             # –†–æ—É—Ç—ã –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
‚îî‚îÄ‚îÄ config.py                   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

static/
‚îî‚îÄ‚îÄ js/
    ‚îî‚îÄ‚îÄ payments.js             # Frontend –ª–æ–≥–∏–∫–∞

templates/
‚îî‚îÄ‚îÄ payments/
    ‚îú‚îÄ‚îÄ success.html            # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞
    ‚îî‚îÄ‚îÄ cancel.html             # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–º–µ–Ω—ã

requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
.env.example                    # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
YOOKASSA_SETUP.md              # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
PAYMENT_INTEGRATION_SUMMARY.md # –≠—Ç–æ —Ä–µ–∑—é–º–µ
```

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏!** üéâ

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –ÆKassa ‚Äî —Å—Ä–∞–∑—É —Å–º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π.
