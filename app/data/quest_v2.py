"""
–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫–≤–µ—Å—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤ –ù–µ–π—Ä–æ–º–∞–≥–∏–∏ (–í–µ—Ä—Å–∏—è 2.0)
–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ —Ä–µ–∞–ª–∏–∏ —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
"""

from typing import Dict, List, Optional

QUEST_DATA = {
    # ============================================
    # –í–û–ü–†–û–° 1: –î–ª—è —á–µ–≥–æ AI?
    # ============================================
    "q1": {
        "id": "q1",
        "text": "üåü –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ê–∫–∞–¥–µ–º–∏—é –ù–µ–π—Ä–æ–º–∞–≥–∏–∏!",
        "description": "–î–ª—è —á–µ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?",
        "type": "choice",
        "answers": [
            {
                "id": "q1_a1",
                "text": "–î–ª—è —Ä–∞–±–æ—Ç—ã: –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω—É",
                "next": "q2_work",
                "purpose": "work"
            },
            {
                "id": "q1_a2",
                "text": "–î–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞: —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –º—É–∑—ã–∫—É",
                "next": "q2_creative",
                "purpose": "creative"
            },
            {
                "id": "q1_a3",
                "text": "–î–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è: –ø–æ–Ω—è—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –±—É–¥—É—â–µ–≥–æ",
                "next": "q2_learning",
                "purpose": "learning"
            },
            {
                "id": "q1_a4",
                "text": "–î–ª—è –±–∏–∑–Ω–µ—Å–∞: —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã",
                "next": "q2_business",
                "purpose": "business"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 2: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
    # ============================================
    "q2_work": {
        "id": "q2_work",
        "text": "üíº –ü—É—Ç—å –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!",
        "description": "–ö–∞–∫–∏–µ —Ä–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å?",
        "type": "choice",
        "answers": [
            {
                "id": "q2w_a1",
                "text": "–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤, emails, –æ—Ç—á—ë—Ç–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",
                "next": "q3_common",
                "task": "writing"
            },
            {
                "id": "q2w_a2",
                "text": "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è",
                "next": "q3_common",
                "task": "analysis"
            },
            {
                "id": "q2w_a3",
                "text": "–ü–æ–º–æ—â—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ",
                "next": "q3_common",
                "task": "coding"
            }
        ]
    },

    "q2_creative": {
        "id": "q2_creative",
        "text": "üé® –ü—É—Ç—å –¢–≤–æ—Ä—Ü–∞!",
        "description": "–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å?",
        "type": "choice",
        "answers": [
            {
                "id": "q2c_a1",
                "text": "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –ª–æ–≥–æ—Ç–∏–ø—ã, –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏, –¥–∏–∑–∞–π–Ω",
                "next": "q3_common",
                "task": "images"
            },
            {
                "id": "q2c_a2",
                "text": "–ö–æ–Ω—Ç–µ–Ω—Ç: —Ç–µ–∫—Å—Ç—ã, –ø–æ—Å—Ç—ã, —Å—Ç–∞—Ç—å–∏ –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π",
                "next": "q3_common",
                "task": "content"
            },
            {
                "id": "q2c_a3",
                "text": "–í–∏–¥–µ–æ, –º—É–∑—ã–∫–∞, –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞",
                "next": "q3_common",
                "task": "multimedia"
            }
        ]
    },

    "q2_learning": {
        "id": "q2_learning",
        "text": "üìö –ü—É—Ç—å –ó–Ω–∞–Ω–∏—è!",
        "description": "–ß—Ç–æ –≤–∞—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?",
        "type": "choice",
        "answers": [
            {
                "id": "q2l_a1",
                "text": "–û—Å–Ω–æ–≤—ã AI: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –∏ —á—Ç–æ –æ–Ω–∏ —É–º–µ—é—Ç",
                "next": "q3_common",
                "task": "basics"
            },
            {
                "id": "q2l_a2",
                "text": "–ü—Ä–∞–∫—Ç–∏–∫–∞: –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å",
                "next": "q3_common",
                "task": "practice"
            },
            {
                "id": "q2l_a3",
                "text": "–ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ: ML, –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã",
                "next": "q3_common",
                "task": "deep"
            }
        ]
    },

    "q2_business": {
        "id": "q2_business",
        "text": "üöÄ –ü—É—Ç—å –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—è!",
        "description": "–ö–∞–∫—É—é –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á—É —Ö–æ—Ç–∏—Ç–µ —Ä–µ—à–∏—Ç—å?",
        "type": "choice",
        "answers": [
            {
                "id": "q2b_a1",
                "text": "–°–æ–∑–¥–∞—Ç—å AI-–ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ —Å–µ—Ä–≤–∏—Å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤",
                "next": "q3_common",
                "task": "product"
            },
            {
                "id": "q2b_a2",
                "text": "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã –∏ —Å–Ω–∏–∑–∏—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã",
                "next": "q3_common",
                "task": "optimization"
            },
            {
                "id": "q2b_a3",
                "text": "–í–Ω–µ–¥—Ä–∏—Ç—å AI –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–¥–∞–∂–∏",
                "next": "q3_common",
                "task": "marketing"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 3: –î–æ—Å—Ç—É–ø –∫ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º –≤ –†–§
    # ============================================
    "q3_common": {
        "id": "q3_common",
        "text": "üåê –í–æ–ø—Ä–æ—Å –æ –¥–æ—Å—Ç—É–ø–µ...",
        "description": "–ö–∞–∫–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –≤—ã —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª–∏ –∏–ª–∏ –≥–æ—Ç–æ–≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?",
        "type": "choice",
        "answers": [
            {
                "id": "q3_a1",
                "text": "–†–æ—Å—Å–∏–π—Å–∫–∏–µ: Yandex GPT, GigaChat, Kandinsky",
                "next": "q4_russian",
                "access": "russian"
            },
            {
                "id": "q3_a2",
                "text": "–ó–∞—Ä—É–±–µ–∂–Ω—ã–µ —Å VPN: ChatGPT, Claude, Midjourney",
                "next": "q4_vpn",
                "access": "vpn"
            },
            {
                "id": "q3_a3",
                "text": "–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏: DeepSeek, Qwen, Llama",
                "next": "q4_local",
                "access": "local"
            },
            {
                "id": "q3_a4",
                "text": "–ü–æ–∫–∞ –Ω–µ –ø—Ä–æ–±–æ–≤–∞–ª, —Ö–æ—á—É —É–∑–Ω–∞—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã",
                "next": "q4_newbie",
                "access": "none"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 4: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –¥–æ—Å—Ç—É–ø—É
    # ============================================
    "q4_russian": {
        "id": "q4_russian",
        "text": "üá∑üá∫ –û—Ç–ª–∏—á–Ω–æ! –†–æ—Å—Å–∏–π—Å–∫–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –Ω–∞–±–∏—Ä–∞—é—Ç —Å–∏–ª—É!",
        "description": "–ß—Ç–æ –¥–ª—è –≤–∞—Å –≤–∞–∂–Ω–µ–µ?",
        "type": "choice",
        "answers": [
            {
                "id": "q4r_a1",
                "text": "–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å–æ–º",
                "next": "q5_common",
                "priority": "simplicity"
            },
            {
                "id": "q4r_a2",
                "text": "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫",
                "next": "q5_common",
                "priority": "free"
            },
            {
                "id": "q4r_a3",
                "text": "–ö–∞—á–µ—Å—Ç–≤–æ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –≥–æ—Ç–æ–≤ –ø–ª–∞—Ç–∏—Ç—å",
                "next": "q5_common",
                "priority": "quality"
            }
        ]
    },

    "q4_vpn": {
        "id": "q4_vpn",
        "text": "üîê –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ VPN ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä!",
        "description": "–° –∫–∞–∫–∏–º–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å?",
        "type": "choice",
        "answers": [
            {
                "id": "q4v_a1",
                "text": "VPN –Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω, –Ω—É–∂–Ω—ã –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã",
                "next": "q5_common",
                "vpn_issue": "unstable"
            },
            {
                "id": "q4v_a2",
                "text": "–°–ª–æ–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞—Ä—É–±–µ–∂–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏",
                "next": "q5_common",
                "vpn_issue": "payment"
            },
            {
                "id": "q4v_a3",
                "text": "–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ö–æ—á—É —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π",
                "next": "q5_common",
                "vpn_issue": "none"
            }
        ]
    },

    "q4_local": {
        "id": "q4_local",
        "text": "‚ö° –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ ‚Äî –ø—É—Ç—å –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ –º–∞–≥–∞!",
        "description": "–ö–∞–∫–æ–π —É –≤–∞—Å –æ–ø—ã—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏?",
        "type": "choice",
        "answers": [
            {
                "id": "q4l_a1",
                "text": "–ó–∞–ø—É—Å–∫–∞–ª —á–µ—Ä–µ–∑ Ollama –∏–ª–∏ LM Studio",
                "next": "q5_common",
                "local_exp": "beginner"
            },
            {
                "id": "q4l_a2",
                "text": "–†–∞–±–æ—Ç–∞—é —Å Hugging Face –∏ —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π",
                "next": "q5_common",
                "local_exp": "advanced"
            },
            {
                "id": "q4l_a3",
                "text": "–°–ª—ã—à–∞–ª, –Ω–æ –Ω–µ –ø—Ä–æ–±–æ–≤–∞–ª ‚Äî —Ö–æ—á—É –Ω–∞—É—á–∏—Ç—å—Å—è",
                "next": "q5_common",
                "local_exp": "curious"
            }
        ]
    },

    "q4_newbie": {
        "id": "q4_newbie",
        "text": "‚ú® –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä AI!",
        "description": "–ß—Ç–æ –≤–∞—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç?",
        "type": "choice",
        "answers": [
            {
                "id": "q4n_a1",
                "text": "–ù–µ –∑–Ω–∞—é, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å ‚Äî —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏",
                "next": "q5_common",
                "barrier": "overwhelmed"
            },
            {
                "id": "q4n_a2",
                "text": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º",
                "next": "q5_common",
                "barrier": "access"
            },
            {
                "id": "q4n_a3",
                "text": "–ù–µ –ø–æ–Ω–∏–º–∞—é, –∫–∞–∫ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –º–æ–∏–º –∑–∞–¥–∞—á–∞–º",
                "next": "q5_common",
                "barrier": "application"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 5: –û–ø—ã—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
    # ============================================
    "q5_common": {
        "id": "q5_common",
        "text": "üíª –°–∫–∞–∂–∏—Ç–µ —á–µ—Å—Ç–Ω–æ...",
        "description": "–ö–∞–∫–æ–π —É –≤–∞—Å –æ–ø—ã—Ç –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?",
        "type": "choice",
        "answers": [
            {
                "id": "q5_a1",
                "text": "–ù–∏–∫–∞–∫–æ–≥–æ, –∏ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É—é —É—á–∏—Ç—å—Å—è –∫–æ–¥–∏—Ç—å",
                "next": "q6_nocode",
                "coding": "none"
            },
            {
                "id": "q5_a2",
                "text": "–ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è Python –∏–ª–∏ –≥–æ—Ç–æ–≤ –∏–∑—É—á–∏—Ç—å",
                "next": "q6_code",
                "coding": "beginner"
            },
            {
                "id": "q5_a3",
                "text": "–£–≤–µ—Ä–µ–Ω–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –∑–Ω–∞—é Python/JS",
                "next": "q6_code",
                "coding": "advanced"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 6: –ü—É—Ç—å –±–µ–∑ –∫–æ–¥–∞ / —Å –∫–æ–¥–æ–º
    # ============================================
    "q6_nocode": {
        "id": "q6_nocode",
        "text": "ü™Ñ No-code ‚Äî —ç—Ç–æ —Ç–æ–∂–µ –º–∞–≥–∏—è!",
        "description": "–ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã?",
        "type": "choice",
        "answers": [
            {
                "id": "q6n_a1",
                "text": "–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã: —á–∞—Ç—ã, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                "next": "q7_common",
                "tools": "web"
            },
            {
                "id": "q6n_a2",
                "text": "Telegram-–±–æ—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zapier/Make",
                "next": "q7_common",
                "tools": "automation"
            },
            {
                "id": "q6n_a3",
                "text": "Cursor, Windsurf ‚Äî AI –ø–æ–º–æ—â–Ω–∏–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–¥–∞",
                "next": "q7_common",
                "tools": "ai_coding"
            }
        ]
    },

    "q6_code": {
        "id": "q6_code",
        "text": "üêç Python + AI = ‚ù§Ô∏è",
        "description": "–ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Å–≤–æ–∏—Ç—å?",
        "type": "choice",
        "answers": [
            {
                "id": "q6c_a1",
                "text": "API –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã",
                "next": "q7_common",
                "code_goal": "api"
            },
            {
                "id": "q6c_a2",
                "text": "LangChain, AI-–∞–≥–µ–Ω—Ç—ã, RAG —Å–∏—Å—Ç–µ–º—ã",
                "next": "q7_common",
                "code_goal": "frameworks"
            },
            {
                "id": "q6c_a3",
                "text": "–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π, fine-tuning, ML",
                "next": "q7_common",
                "code_goal": "ml"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 7: –ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å?
    # ============================================
    "q7_common": {
        "id": "q7_common",
        "text": "üéØ –î–∞–≤–∞–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ!",
        "description": "–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é AI?",
        "type": "choice",
        "answers": [
            {
                "id": "q7_a1",
                "text": "–°–≤–æ–µ–≥–æ AI-–ø–æ–º–æ—â–Ω–∏–∫–∞ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á",
                "next": "q8_common",
                "project": "assistant"
            },
            {
                "id": "q7_a2",
                "text": "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –∫–æ–º–ø–∞–Ω–∏–∏",
                "next": "q8_common",
                "project": "workflow"
            },
            {
                "id": "q7_a3",
                "text": "–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π, –±–ª–æ–≥–∞ –∏–ª–∏ –±–∏–∑–Ω–µ—Å–∞",
                "next": "q8_common",
                "project": "content_creation"
            },
            {
                "id": "q7_a4",
                "text": "–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π AI-–ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ —Å–µ—Ä–≤–∏—Å",
                "next": "q8_common",
                "project": "product"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 8: –í—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
    # ============================================
    "q8_common": {
        "id": "q8_common",
        "text": "‚è∞ –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≥–æ—Ç–æ–≤—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å?",
        "description": "–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –æ—Ü–µ–Ω–∏—Ç–µ —Å–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
        "type": "choice",
        "answers": [
            {
                "id": "q8_a1",
                "text": "1-2 —á–∞—Å–∞ –≤ –Ω–µ–¥–µ–ª—é (–∏–∑—É—á–∞—é –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è)",
                "next": "q9_common",
                "time": "light"
            },
            {
                "id": "q8_a2",
                "text": "5-7 —á–∞—Å–æ–≤ –≤ –Ω–µ–¥–µ–ª—é (—Å–µ—Ä—å—ë–∑–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)",
                "next": "q9_common",
                "time": "medium"
            },
            {
                "id": "q8_a3",
                "text": "10+ —á–∞—Å–æ–≤ –≤ –Ω–µ–¥–µ–ª—é (—Ö–æ—á—É –±—ã—Å—Ç—Ä–æ –≤–æ–π—Ç–∏ –≤ —Ç–µ–º—É)",
                "next": "q9_common",
                "time": "intensive"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 9: –ë—é–¥–∂–µ—Ç –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–∏—Ç—å
    # ============================================
    "q9_common": {
        "id": "q9_common",
        "text": "üí∞ –í–æ–ø—Ä–æ—Å –ø—Ä–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏...",
        "description": "–ì–æ—Ç–æ–≤—ã –ª–∏ –≤—ã –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –≤ –æ–±—É—á–µ–Ω–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã?",
        "type": "choice",
        "answers": [
            {
                "id": "q9_a1",
                "text": "–¢–æ–ª—å–∫–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
                "next": "q10_common",
                "budget": "free"
            },
            {
                "id": "q9_a2",
                "text": "–ì–æ—Ç–æ–≤ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫—É—Ä—Å—ã (–¥–æ 10–∫‚ÇΩ)",
                "next": "q10_common",
                "budget": "courses"
            },
            {
                "id": "q9_a3",
                "text": "–ò–Ω–≤–µ—Å—Ç–∏—Ä—É—é —Å–µ—Ä—å—ë–∑–Ω–æ: –∫—É—Ä—Å—ã + –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ AI (10-30–∫‚ÇΩ)",
                "next": "q10_common",
                "budget": "premium"
            }
        ]
    },

    # ============================================
    # –í–û–ü–†–û–° 10: –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    # ============================================
    "q10_common": {
        "id": "q10_common",
        "text": "‚ú® –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å! –ß—Ç–æ —á–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞?",
        "description": "–ö–∞–∫–∏–º –≤—ã –≤–∏–¥–∏—Ç–µ —Å–µ–±—è –ø–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è?",
        "type": "choice",
        "answers": [
            {
                "id": "q10_a1",
                "text": "–£–≤–µ—Ä–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é AI –≤ —Ä–∞–±–æ—Ç–µ/—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å",
                "next": "challenge",
                "result": "daily_use"
            },
            {
                "id": "q10_a2",
                "text": "–°–æ–∑–¥–∞–ª —Ä–∞–±–æ—á–∏–π –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–æ—Å–∏—Ç –ø–æ–ª—å–∑—É",
                "next": "challenge",
                "result": "project_done"
            },
            {
                "id": "q10_a3",
                "text": "–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é –Ω–∞ AI: —Ñ—Ä–∏–ª–∞–Ω—Å, –ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥",
                "next": "challenge",
                "result": "monetization"
            },
            {
                "id": "q10_a4",
                "text": "–°—Ç–∞–ª —ç–∫—Å–ø–µ—Ä—Ç–æ–º, –º–æ–≥—É —É—á–∏—Ç—å –¥—Ä—É–≥–∏—Ö",
                "next": "challenge",
                "result": "expertise"
            }
        ]
    },

    # ============================================
    # –§–ò–ù–ê–õ–¨–ù–ê–Ø –ó–ê–î–ê–ß–ö–ê
    # ============================================
    "challenge": {
        "id": "challenge",
        "text": "üîÆ –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ –†–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—â–µ–π –®–ª—è–ø—ã!",
        "description": "–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –º–µ—á—Ç—ã, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é AI",
        "type": "text",
        "placeholder": "–ù–∞–ø—Ä–∏–º–µ—Ä: –°–æ–∑–¥–∞—Ç—å Telegram-–±–æ—Ç–∞ –¥–ª—è –º–æ–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ 24/7, –∏—Å–ø–æ–ª—å–∑—É—è –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–∏...",
        "hint": "–ë—É–¥—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã: —á—Ç–æ –¥–æ–ª–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –¥–ª—è –∫–æ–≥–æ, –∫–∞–∫—É—é –ø—Ä–æ–±–ª–µ–º—É —Ä–µ—à–∞–µ—Ç",
        "min_length": 30,
        "next": "contact"
    },

    # ============================================
    # –§–û–†–ú–ê –ö–û–ù–¢–ê–ö–¢–û–í
    # ============================================
    "contact": {
        "id": "contact",
        "text": "üìû –ü–æ—á—Ç–∏ —É —Ü–µ–ª–∏! –î–∞–≤–∞–π—Ç–µ —Å–≤—è–∂–µ–º—Å—è",
        "description": "–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –ø–æ–º–æ—á—å –≤–∞–º —Å –≤—ã–±–æ—Ä–æ–º –∫—É—Ä—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã",
        "type": "contact",
        "next": "results"
    },

    # ============================================
    # –†–ï–ó–£–õ–¨–¢–ê–¢–´
    # ============================================
    "results": {
        "id": "results",
        "text": "‚ú® –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!",
        "description": "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –∏ –ø–æ–¥–±–∏—Ä–∞–µ–º –∏–¥–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –æ–±—É—á–µ–Ω–∏—è...",
        "type": "results"
    }
}


def get_question(question_id: str) -> Optional[Dict]:
    """–ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ ID"""
    return QUEST_DATA.get(question_id)


def get_first_question() -> Dict:
    """–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å –∫–≤–µ—Å—Ç–∞"""
    return QUEST_DATA["q1"]


def calculate_recommendation(answers: List[Dict]) -> Dict:
    """
    –í—ã—á–∏—Å–ª–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ —Ä–µ–∞–ª–∏–∏
    """
    # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    profile = {
        "purpose": "work",  # work, creative, learning, business
        "task": "writing",  # –∑–∞–≤–∏—Å–∏—Ç –æ—Ç purpose
        "access": "none",  # russian, vpn, local, none
        "coding": "none",  # none, beginner, advanced
        "tools": "web",  # web, automation, ai_coding
        "project": "assistant",  # —á—Ç–æ —Ö–æ—á–µ—Ç —Å–æ–∑–¥–∞—Ç—å
        "time": "medium",  # light, medium, intensive
        "budget": "free",  # free, courses, premium
        "result": "daily_use"  # –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    }
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤
    for answer in answers:
        for key in profile.keys():
            if key in answer:
                profile[key] = answer[key]
    
    # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∫—É—Ä—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª—è
    recommendations = []
    
    # ============================================
    # –õ–û–ì–ò–ö–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô –ü–û–î –†–û–°–°–ò–ô–°–ö–ò–ï –†–ï–ê–õ–ò–ò
    # ============================================
    
    # 1. –î–ª—è —Ç–µ—Ö, –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
    if profile["access"] == "russian":
        recommendations.append({
            "id": "yandex-gpt-master",
            "title": "Yandex GPT –∏ GigaChat: –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å",
            "level": "beginner",
            "reason": "–ù–∞—É—á–∏—Ç–µ—Å—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º–∏ –±–µ–∑ VPN",
            "tools": ["Yandex GPT", "GigaChat", "Kandinsky"]
        })
    
    # 2. –î–ª—è —Ç–µ—Ö, –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç VPN
    if profile["access"] == "vpn":
        recommendations.append({
            "id": "vpn-ai-toolkit",
            "title": "AI —á–µ—Ä–µ–∑ VPN: –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤",
            "level": "junior",
            "reason": "–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å ChatGPT, Claude, Midjourney + –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã",
            "tools": ["ChatGPT", "Claude", "Midjourney", "VPN Setup"]
        })
    
    # 3. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏
    if profile["access"] == "local" or profile["coding"] == "advanced":
        recommendations.append({
            "id": "local-models",
            "title": "–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏: DeepSeek, Qwen, Llama",
            "level": "middle",
            "reason": "–ü–æ–ª–Ω–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ AI –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ",
            "tools": ["DeepSeek", "Qwen", "Llama", "Ollama"]
        })
    
    # 4. –î–ª—è –±–∏–∑–Ω–µ—Å–∞ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    if profile["purpose"] == "business" or profile["project"] == "product":
        recommendations.append({
            "id": "ai-business",
            "title": "AI –¥–ª—è –±–∏–∑–Ω–µ—Å–∞: –æ—Ç –∏–¥–µ–∏ –¥–æ –∑–∞–ø—É—Å–∫–∞",
            "level": "middle",
            "reason": "–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–±—ã–ª—å–Ω—ã–π AI-–ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ –≤–Ω–µ–¥—Ä–∏—Ç–µ –≤ —Å–≤–æ–π –±–∏–∑–Ω–µ—Å",
            "tools": ["API", "Telegram Bots", "Monetization"]
        })
    
    # 5. –î–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞
    if profile["purpose"] == "creative" or profile["task"] in ["images", "content", "multimedia"]:
        recommendations.append({
            "id": "creative-ai",
            "title": "AI –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞",
            "level": "beginner",
            "reason": "–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é Kandinsky, Shedevrum –∏ –∞–Ω–∞–ª–æ–≥–æ–≤",
            "tools": ["Kandinsky", "Shedevrum", "Yandex GPT"]
        })
    
    # 6. –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã
    if profile["purpose"] == "work" or profile["task"] in ["writing", "analysis"]:
        recommendations.append({
            "id": "work-automation",
            "title": "AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω—ã",
            "level": "junior",
            "reason": "–°–æ–∫—Ä–∞—Ç–∏—Ç–µ –≤—Ä–µ–º—è –Ω–∞ —Ä—É—Ç–∏–Ω—É –≤ 10 —Ä–∞–∑ —Å –ø–æ–º–æ—â—å—é AI",
            "tools": ["ChatGPT/YandexGPT", "Notion AI", "Zapier"]
        })
    
    # 7. –î–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤
    if profile["coding"] != "none":
        recommendations.append({
            "id": "ai-for-developers",
            "title": "AI –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: Cursor, Qoder, GitHub Copilot",
            "level": "middle",
            "reason": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–π—Ç–µ –≤ 5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏",
            "tools": ["Cursor", "Qoder", "GitHub Copilot", "Codeium"]
        })
    
    # 8. –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ –±–µ–∑ –∫–æ–¥–∞
    if profile["coding"] == "none" and profile["tools"] == "ai_coding":
        recommendations.append({
            "id": "no-code-ai",
            "title": "–í–∞–π–±–∫–æ–¥–∏–Ω–≥: —Å–æ–∑–¥–∞–≤–∞–π –±–µ–∑ –∫–æ–¥–∞ —Å AI",
            "level": "beginner",
            "reason": "–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–∞–π—Ç—ã —Å –ø–æ–º–æ—â—å—é Cursor –±–µ–∑ –∑–Ω–∞–Ω–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è",
            "tools": ["Cursor", "Windsurf", "v0.dev"]
        })
    
    # 9. –î–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
    if profile["task"] == "deep" or profile["code_goal"] == "ml":
        recommendations.append({
            "id": "ml-deep-dive",
            "title": "–ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ: ML, –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, fine-tuning",
            "level": "senior",
            "reason": "–°—Ç–∞–Ω—å—Ç–µ AI-–∏–Ω–∂–µ–Ω–µ—Ä–æ–º: –æ–±—É—á–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ –º–æ–¥–µ–ª–∏",
            "tools": ["PyTorch", "Hugging Face", "Fine-tuning"]
        })
    
    # 10. –î–ª—è VPN-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
    if profile.get("vpn_issue") in ["unstable", "payment"]:
        recommendations.append({
            "id": "vpn-alternatives",
            "title": "AI –±–µ–∑ VPN: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ workarounds",
            "level": "beginner",
            "reason": "–î–æ—Å—Ç—É–ø –∫ –ª—É—á—à–∏–º –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º –¥–∞–∂–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å VPN",
            "tools": ["–†–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã", "API", "–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏"]
        })
    
    # –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ø-3 —Å–∞–º—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö
    unique_recs = []
    seen_ids = set()
    for rec in recommendations:
        if rec["id"] not in seen_ids:
            unique_recs.append(rec)
            seen_ids.add(rec["id"])
            if len(unique_recs) == 3:
                break
    
    # –ï—Å–ª–∏ –º–µ–Ω—å—à–µ 3, –¥–æ–±–∞–≤–ª—è–µ–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫—É—Ä—Å
    if len(unique_recs) < 3:
        unique_recs.append({
            "id": "ai-starter-pack",
            "title": "AI Starter Pack: –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞",
            "level": "beginner",
            "reason": "–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∫—É—Ä—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –º–∏—Ä AI",
            "tools": ["–í—Å–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã", "VPN Setup", "–ü—Ä–∞–∫—Ç–∏–∫–∞"]
        })
    
    return {
        "profile": profile,
        "recommendations": unique_recs,
        "message": _generate_personal_message(profile)
    }


def _generate_personal_message(profile: Dict) -> str:
    """–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª—è"""
    
    purpose_messages = {
        "work": "–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø—É—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏! AI –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ –∏ —É–º–Ω–µ–µ.",
        "creative": "–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø—É—Ç—å —Ç–≤–æ—Ä—Ü–∞! –û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ AI –≤ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ.",
        "learning": "–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø—É—Ç—å –∑–Ω–∞–Ω–∏—è! –ü–æ–≥—Ä—É–∂–∞–π—Ç–µ—Å—å –≤ –º–∏—Ä AI –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å —ç–∫—Å–ø–µ—Ä—Ç–æ–º.",
        "business": "–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø—É—Ç—å –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—è! AI —Å—Ç–∞–Ω–µ—Ç –≤–∞—à–∏–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º."
    }
    
    access_tips = {
        "russian": " –†–æ—Å—Å–∏–π—Å–∫–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è —Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ ‚Äî –≤—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏!",
        "vpn": " –î–æ—Å—Ç—É–ø –∫ –ª—É—á—à–∏–º –º–∏—Ä–æ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ VPN ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!",
        "local": " –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ ‚Äî —ç—Ç–æ —Å–≤–æ–±–æ–¥–∞ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –ü—É—Ç—å –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞!",
        "none": " –ù–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å ‚Äî –º—ã –ø–æ–∫–∞–∂–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AI –≤ –†–æ—Å—Å–∏–∏."
    }
    
    base_message = purpose_messages.get(profile.get("purpose", "learning"), purpose_messages["learning"])
    access_tip = access_tips.get(profile.get("access", "none"), "")
    
    return base_message + access_tip

